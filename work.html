<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Clarifyd | Work</title>
  <meta name="description" content="Showpiece work: a real-feeling data science project run, delivered as a static site." />
  <style>
    :root{
      --bg0:#070A12; --bg1:#0B1022; --text:#F2F4FF; --muted:rgba(242,244,255,.72);
      --radius:22px; --max:1160px; --shadow:0 24px 80px rgba(0,0,0,.55);
      --a:#7C3AED; --b:#22D3EE; --y:#FDE047; --c:#A3FFB0;
      --card: rgba(255,255,255,.05);
      --line: rgba(255,255,255,.12);
      --soft: rgba(0,0,0,.18);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 18% 12%, rgba(124,58,237,.22), transparent 60%),
        radial-gradient(900px 600px at 82% 18%, rgba(34,211,238,.18), transparent 62%),
        radial-gradient(700px 500px at 70% 78%, rgba(253,224,71,.10), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }
    a{color:inherit}
    .container{max-width:var(--max);margin:0 auto;padding:0 22px}
    .muted{color:var(--muted)}
    .tiny{font-size:12px;color:rgba(242,244,255,.62)}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}

    /* Parallax background layers */
    .parallax-layer{position:fixed;inset:-18vh -18vw;pointer-events:none;z-index:0;will-change:transform}
    .layer-a{
      background:
        radial-gradient(900px 520px at 22% 20%, rgba(124,58,237,.26), transparent 60%),
        radial-gradient(640px 420px at 76% 26%, rgba(34,211,238,.20), transparent 62%);
      filter: blur(14px); opacity:.9;
    }
    .layer-b{
      background:
        radial-gradient(720px 500px at 72% 78%, rgba(253,224,71,.14), transparent 62%),
        radial-gradient(520px 420px at 18% 78%, rgba(163,255,176,.10), transparent 62%);
      filter: blur(18px); opacity:.65;
    }
    .layer-c{
      background: radial-gradient(980px 720px at 50% 50%, rgba(255,255,255,.06), transparent 62%);
      filter: blur(26px); opacity:.45;
    }
    .bg-grid{
      position:fixed; inset:0; pointer-events:none; opacity:.20; z-index:1;
      background-image:
        linear-gradient(to right, rgba(255,255,255,.06) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.05) 1px, transparent 1px);
      background-size:64px 64px;
      mask-image: radial-gradient(closest-side at 50% 20%, rgba(0,0,0,1), rgba(0,0,0,0));
    }
    main{position:relative;z-index:2}

    header{
      position:sticky; top:0; z-index:30;
      background:rgba(7,10,18,.55);
      border-bottom:1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(12px);
    }
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:center;gap:10px;font-weight:720;letter-spacing:.2px;text-decoration:none}
    .mark{
      width:14px;height:14px;border-radius:5px;
      background: linear-gradient(135deg,var(--a),var(--b),var(--y));
      box-shadow: 0 0 28px rgba(124,58,237,.45);
    }
    .menu{display:flex;gap:18px;align-items:center}
    .menu a{
      text-decoration:none;font-size:14px;color:rgba(242,244,255,.72);
      padding:10px 10px;border-radius:999px;transition:background .2s,color .2s;
    }
    .menu a:hover{color:var(--text);background:rgba(255,255,255,.06)}
    .pill{padding:10px 14px!important;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);box-shadow:0 10px 30px rgba(0,0,0,.35)}

    .hero{padding:72px 0 18px}
    .kicker{
      display:inline-flex;gap:10px;align-items:center;
      padding:8px 12px;border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);border-radius:999px;
      font-size:13px;color:rgba(242,244,255,.78);
    }
    .spark{
      width:8px;height:8px;border-radius:999px;background:var(--y);
      box-shadow:0 0 0 0 rgba(253,224,71,.35);
      animation:spark 2s ease-in-out infinite;
    }
    @keyframes spark{
      0%{box-shadow:0 0 0 0 rgba(253,224,71,.35)}
      70%{box-shadow:0 0 0 12px rgba(253,224,71,0)}
      100%{box-shadow:0 0 0 0 rgba(253,224,71,0)}
    }
    h1{font-size:46px;letter-spacing:-1px;line-height:1.06;margin:14px 0 10px}
    .grad{
      background:linear-gradient(90deg,var(--a),var(--b),var(--y),var(--c));
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }
    .lead{max-width:86ch;color:rgba(242,244,255,.74);margin:0}

    .section{padding:28px 0 48px}
    .grid{display:grid;grid-template-columns: 1.35fr .65fr; gap:16px; align-items:start}
    .panel{
      border-radius: var(--radius);
      border:1px solid var(--line);
      background: var(--card);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
      overflow:hidden;
      transform: translate3d(0,0,0);
    }
    .panel.pad{padding:18px}
    .panel-header{
      display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
      padding:16px 18px;border-bottom:1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.10);
    }
    .title{font-weight:750;letter-spacing:.2px}
    .tag{
      font-size:12px;padding:8px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.18);
      color:rgba(242,244,255,.74);
      white-space:nowrap;
    }

    .board{position:relative;padding: 14px 14px 16px}
    .board-top{
      display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:space-between;
      margin-bottom: 10px;
    }
    .runbar{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      padding: 10px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.16);
    }
    .dot{
      width:9px;height:9px;border-radius:99px;background: rgba(34,211,238,.95);
      box-shadow: 0 0 18px rgba(34,211,238,.22);
      animation: blink 1.6s ease-in-out infinite;
    }
    @keyframes blink{0%,100%{opacity:.5}50%{opacity:1}}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      color:var(--text); text-decoration:none;
      transition: transform .16s ease, background .2s ease, border-color .2s ease;
      cursor:pointer; user-select:none;
    }
    .btn:hover{transform:translateY(-1px);background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.18)}
    .btn.primary{background:linear-gradient(135deg, rgba(124,58,237,.85), rgba(34,211,238,.70), rgba(253,224,71,.38));border-color:transparent}

    .metrics{
      display:grid;
      grid-template-columns: repeat(4, minmax(0,1fr));
      gap: 10px;
      margin-bottom: 12px;
    }
    .metric{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.14);
      border-radius: 16px;
      padding: 10px 12px;
      position:relative;
      overflow:hidden;
    }
    .metric::before{
      content:"";
      position:absolute; inset:-50px -80px;
      background: radial-gradient(closest-side at 20% 20%, rgba(253,224,71,.10), transparent 68%);
      opacity:.85;
      pointer-events:none;
    }
    .metric .k{font-size:12px;color:rgba(242,244,255,.68)}
    .metric .v{font-size:18px;font-weight:800;letter-spacing:-.2px;margin-top:2px}
    .metric .sub{font-size:12px;color:rgba(242,244,255,.62);margin-top:2px}

    .subgrid{display:grid;grid-template-columns: 1.05fr .95fr; gap: 12px}
    .svg-wrap{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.12);
      border-radius: 18px;
      padding: 10px;
      overflow:hidden;
      position:relative;
    }
    .svg-wrap::after{
      content:"";
      position:absolute; left:0; right:0; bottom:0; height: 120px;
      background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.22));
      pointer-events:none;
    }
    svg{width:100%;height:auto;display:block}

    .cm{display:grid;grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px}
    .cell{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      padding: 10px 10px;
      position:relative;
      overflow:hidden;
    }
    .cell .h{font-size:11px;color:rgba(242,244,255,.62)}
    .cell .n{font-size:18px;font-weight:800;margin-top:2px}
    .bar{
      position:absolute;left:0;bottom:0;height:4px;width:0%;
      background: linear-gradient(90deg, rgba(34,211,238,.8), rgba(253,224,71,.8));
      opacity:.8;
    }

    /* Data quality + cleaning */
    .dq{
      display:grid;grid-template-columns: repeat(3,minmax(0,1fr));
      gap: 10px; margin-top: 10px;
    }
    .dq .chip{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.14);
      border-radius: 16px;
      padding: 10px 12px;
    }
    .dq .chip .k{font-size:11px;color:rgba(242,244,255,.62)}
    .dq .chip .v{font-weight:850;font-size:16px;margin-top:2px}
    .mini-bars{display:grid;gap:8px;margin-top:10px}
    .mini-bar{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.12);
      border-radius: 14px;
      padding: 10px 10px;
    }
    .mini-bar-top{display:flex;justify-content:space-between;gap:10px;align-items:center}
    .track{height:8px;border-radius:999px;background: rgba(255,255,255,.06);overflow:hidden;margin-top:8px}
    .fill{height:100%;width:20%;border-radius:999px;background: linear-gradient(90deg, rgba(124,58,237,.9), rgba(34,211,238,.9), rgba(253,224,71,.8))}

    /* Feature importance */
    .fi{display:grid;gap:10px;margin-top:10px}
    .fi-row{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.12);
      border-radius: 14px;
      padding: 10px 10px;
    }
    .fi-top{display:flex;justify-content:space-between;gap:10px;align-items:center}
    .fi-name{font-weight:700}
    .fi-val{color:rgba(242,244,255,.70)}
    .fi-track{height:8px;border-radius:999px;background: rgba(255,255,255,.06);overflow:hidden;margin-top:8px}
    .fi-fill{height:100%;width:40%;border-radius:999px;background: linear-gradient(90deg, rgba(34,211,238,.9), rgba(253,224,71,.85))}

    /* Side panels */
    .side{display:grid;gap:16px}
    .list{display:grid;gap:10px;margin-top:12px}
    .item{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.14);
      border-radius: 16px;
      padding: 12px 12px;
      display:flex; justify-content:space-between; gap: 10px;
    }
    .badge{
      font-size:12px;
      padding: 6px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      color: rgba(242,244,255,.74);
      white-space: nowrap;
    }

    .terminal{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      border-radius: 18px;
      padding: 12px;
      height: 220px;
      overflow:hidden;
      position:relative;
    }
    .terminal::before{
      content:"";
      position:absolute; inset:-80px -120px;
      background: radial-gradient(closest-side at 20% 20%, rgba(124,58,237,.18), transparent 68%);
      opacity:.75;
      pointer-events:none;
    }
    .log{position:relative;display:grid;gap:8px}
    .line{display:flex;gap:10px;align-items:flex-start}
    .ts{color:rgba(242,244,255,.48);min-width:62px}
    .msg{color:rgba(242,244,255,.78)}
    .hl{color:rgba(253,224,71,.86)}

    /* monitor strip */
    .strip{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.12);
      border-radius: 18px;
      padding: 10px;
      margin-top: 12px;
    }
    .strip svg{height:64px}
    .alert{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.14);
    }
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      font-size:12px;color:rgba(242,244,255,.74);
      white-space:nowrap;
    }
    .pill .s{width:8px;height:8px;border-radius:99px;background: rgba(163,255,176,.9);box-shadow: 0 0 18px rgba(163,255,176,.18)}

    .reveal{opacity:0;transform:translateY(14px);transition:opacity .7s ease,transform .7s ease}
    .reveal.is-visible{opacity:1;transform:translateY(0)}
    footer{padding:26px 0 38px;border-top:1px solid rgba(255,255,255,.10)}

    @media (max-width: 1040px){
      .grid{grid-template-columns:1fr}
      .metrics{grid-template-columns:repeat(2,minmax(0,1fr))}
      .subgrid{grid-template-columns:1fr}
      h1{font-size:40px}
      .dq{grid-template-columns:1fr}
    }
    @media (prefers-reduced-motion: reduce){
      .reveal{transition:none!important}
      .spark,.dot{animation:none!important}
    }
  </style>
</head>
<body>
  <div class="parallax-layer layer-a" data-parallax="0.10" aria-hidden="true"></div>
  <div class="parallax-layer layer-b" data-parallax="0.18" aria-hidden="true"></div>
  <div class="parallax-layer layer-c" data-parallax="0.26" aria-hidden="true"></div>
  <div class="bg-grid" aria-hidden="true"></div>

  <header>
    <div class="container nav">
      <a class="brand" href="/"><span class="mark"></span><span>Clarifyd</span></a>
      <nav class="menu" aria-label="Primary">
        <a href="/services.html">Services</a>
        <a href="/work.html" aria-current="page">Work</a>
        <a href="/contact.html" class="pill">Contact</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container reveal">
        <div class="kicker"><span class="spark"></span> From noise to signal</div>
        <h1>A DS project that feels <span class="grad">real</span>.</h1>
        <p class="lead"> Watch a project move end-to-end — ingest, clean, train, validate, deploy, and monitor — just like real delivery.</p>
      </div>
    </section>

    <section class="section">
      <div class="container grid">
        <!-- Main -->
        <section class="panel reveal">
          <div class="panel-header">
            <div>
              <div class="title">Experiment run — <span class="mono" id="runId">run_7f3a</span></div>
              <div class="tiny">Simulated workflow (no network): reproducible, deterministic-ish signals.</div>
            </div>
            <div class="tag"><span class="mono" id="epochTag">epoch 1</span></div>
          </div>

          <div class="board">
            <div class="board-top">
              <div class="runbar">
                <span class="dot" aria-hidden="true"></span>
                <div class="mono tiny">status: <span class="hl" id="status">training</span></div>
                <div class="mono tiny">seed: <span id="seed">42</span></div>
                <div class="mono tiny">rows: <span id="rows">1,240,000</span></div>
              </div>

              <div style="display:flex;gap:10px;flex-wrap:wrap;">
                <button class="btn" id="pauseBtn" type="button">Pause</button>
                <button class="btn primary" id="restartBtn" type="button">Restart</button>
              </div>
            </div>

            <div class="metrics">
              <div class="metric">
                <div class="k">Loss</div>
                <div class="v mono" id="loss">1.214</div>
                <div class="sub mono">↓ converging</div>
              </div>
              <div class="metric">
                <div class="k">AUC</div>
                <div class="v mono" id="auc">0.612</div>
                <div class="sub mono">↑ improving</div>
              </div>
              <div class="metric">
                <div class="k">Accuracy</div>
                <div class="v mono" id="acc">0.684</div>
                <div class="sub mono">↑ stabilising</div>
              </div>
              <div class="metric">
                <div class="k">Drift</div>
                <div class="v mono" id="drift">0.18</div>
                <div class="sub mono">monitoring</div>
              </div>
            </div>

            <div class="subgrid">
              <!-- Curves -->
              <div class="svg-wrap">
                <svg viewBox="0 0 720 260" role="img" aria-label="Training curve">
                  <defs>
                    <linearGradient id="gLine" x1="0" y1="0" x2="1" y2="0">
                      <stop offset="0" stop-color="rgba(124,58,237,0.95)"/>
                      <stop offset="0.55" stop-color="rgba(34,211,238,0.95)"/>
                      <stop offset="1" stop-color="rgba(253,224,71,0.95)"/>
                    </linearGradient>
                    <linearGradient id="gFill" x1="0" y1="0" x2="0" y2="1">
                      <stop offset="0" stop-color="rgba(34,211,238,0.20)"/>
                      <stop offset="1" stop-color="rgba(34,211,238,0)"/>
                    </linearGradient>
                  </defs>

                  <g opacity="0.18">
                    <path d="M40 30 H700 M40 80 H700 M40 130 H700 M40 180 H700 M40 230 H700" stroke="white" stroke-width="1"/>
                    <path d="M100 20 V240 M200 20 V240 M300 20 V240 M400 20 V240 M500 20 V240 M600 20 V240" stroke="white" stroke-width="1"/>
                  </g>

                  <path d="M40 240 H700" stroke="rgba(255,255,255,0.25)"/>
                  <path d="M40 20 V240" stroke="rgba(255,255,255,0.25)"/>

                  <path id="area" d="" fill="url(#gFill)" opacity="0.9"></path>
                  <path id="curve" d="" fill="none" stroke="url(#gLine)" stroke-width="3" stroke-linecap="round"></path>
                  <circle id="marker" cx="0" cy="0" r="6" fill="rgba(253,224,71,0.95)" opacity="0.9"></circle>

                  <text x="42" y="18" class="mono" font-size="12" fill="rgba(242,244,255,0.70)">live validation quality</text>
                </svg>
              </div>

              <!-- Validate + cleaning -->
              <div class="svg-wrap">
                <div class="tiny mono" style="padding:2px 2px 10px;color:rgba(242,244,255,.72)">
                  validation gate: <span class="hl" id="gate">pending</span>
                </div>

                <div class="cm" aria-label="Confusion matrix">
                  <div class="cell"><div class="h mono">TP</div><div class="n mono" id="tp">482</div><div class="bar" id="tpb"></div></div>
                  <div class="cell"><div class="h mono">FP</div><div class="n mono" id="fp">171</div><div class="bar" id="fpb"></div></div>
                  <div class="cell"><div class="h mono">FN</div><div class="n mono" id="fn">139</div><div class="bar" id="fnb"></div></div>
                  <div class="cell"><div class="h mono">TN</div><div class="n mono" id="tn">611</div><div class="bar" id="tnb"></div></div>
                </div>

                <div class="dq" aria-label="Data quality">
                  <div class="chip"><div class="k mono">nulls</div><div class="v mono" id="nulls">2.8%</div></div>
                  <div class="chip"><div class="k mono">outliers</div><div class="v mono" id="outliers">1.6%</div></div>
                  <div class="chip"><div class="k mono">dupes</div><div class="v mono" id="dupes">0.9%</div></div>
                </div>

                <div class="mini-bars" aria-label="Cleaning actions">
                  <div class="mini-bar">
                    <div class="mini-bar-top">
                      <div class="mono tiny">drop nulls</div><div class="mono tiny"><span id="dropNulls">42,300</span> rows</div>
                    </div>
                    <div class="track"><div class="fill" id="dropNullsFill"></div></div>
                  </div>
                  <div class="mini-bar">
                    <div class="mini-bar-top">
                      <div class="mono tiny">clamp outliers</div><div class="mono tiny"><span id="clamp">18,120</span> rows</div>
                    </div>
                    <div class="track"><div class="fill" id="clampFill"></div></div>
                  </div>
                  <div class="mini-bar">
                    <div class="mini-bar-top">
                      <div class="mono tiny">remove duplicates</div><div class="mono tiny"><span id="dedupe">9,640</span> rows</div>
                    </div>
                    <div class="track"><div class="fill" id="dedupeFill"></div></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Feature importance + monitor -->
            <div class="subgrid" style="margin-top:12px">
              <div class="svg-wrap">
                <div class="tiny mono" style="padding:2px 2px 10px;color:rgba(242,244,255,.72)">
                  feature importance (shifts with drift)
                </div>
                <div class="fi" id="fi"></div>
              </div>

              <div class="svg-wrap">
                <div class="tiny mono" style="padding:2px 2px 10px;color:rgba(242,244,255,.72)">
                  drift monitor (last 60m)
                </div>

                <div class="strip">
                  <svg viewBox="0 0 720 80" role="img" aria-label="Drift strip">
                    <path d="M20 60 H700" stroke="rgba(255,255,255,0.18)"/>
                    <path id="driftLine" d="" fill="none" stroke="rgba(34,211,238,0.85)" stroke-width="3" stroke-linecap="round"/>
                    <circle id="driftDot" cx="0" cy="0" r="6" fill="rgba(253,224,71,0.92)"/>
                    <text x="22" y="18" class="mono" font-size="12" fill="rgba(242,244,255,0.68)">PSI / drift</text>
                  </svg>
                </div>

                <div class="alert">
                  <div>
                    <div style="font-weight:750">Alerts</div>
                    <div class="tiny muted">Threshold: drift &gt; <span class="mono">0.22</span></div>
                  </div>
                  <span class="pill"><span class="s" id="alertDot"></span><span class="mono" id="alertText">ok</span></span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Side -->
        <aside class="side">
          <section class="panel pad reveal">
            <div class="title">Artifacts</div>
            <div class="muted" style="margin-top:6px">What a real delivery produces.</div>

            <div class="list">
              <div class="item">
                <div>
                  <div style="font-weight:700">Data contract</div>
                  <div class="tiny mono">schema.yaml • checks.sql</div>
                </div>
                <span class="badge">versioned</span>
              </div>
              <div class="item">
                <div>
                  <div style="font-weight:700">Pipelines</div>
                  <div class="tiny mono">ingest → transform → train</div>
                </div>
                <span class="badge">scheduled</span>
              </div>
              <div class="item">
                <div>
                  <div style="font-weight:700">Model registry</div>
                  <div class="tiny mono">model:v3.2 • tags:staging</div>
                </div>
                <span class="badge">ready</span>
              </div>
              <div class="item">
                <div>
                  <div style="font-weight:700">Deployment</div>
                  <div class="tiny mono">blue/green • rollback</div>
                </div>
                <span class="badge" id="deployBadge">pending</span>
              </div>
            </div>
          </section>

          <section class="panel pad reveal">
            <div style="display:flex;justify-content:space-between;gap:10px;align-items:flex-start">
              <div>
                <div class="title">RAG retrieval</div>
                <div class="tiny muted">Simulated context refresh.</div>
              </div>
              <div class="tag mono">top-k=4</div>
            </div>
            <div class="terminal" style="margin-top:12px">
              <div class="log" id="ragLog"></div>
            </div>
          </section>

          <section class="panel pad reveal">
            <div class="title">Pipeline events</div>
            <div class="tiny muted" style="margin-top:6px">Simulated stream logs.</div>
            <div class="terminal" style="margin-top:12px">
              <div class="log" id="pipeLog"></div>
            </div>
          </section>
        </aside>
      </div>
    </section>

    <footer>
      <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap;padding-top:18px;">
        <a class="brand" href="/"><span class="mark"></span><span>Clarifyd</span></a>
        <div style="display:flex;gap:14px;align-items:center;flex-wrap:wrap;">
          <a class="tiny" href="/privacy.html" style="text-decoration:none;color:rgba(242,244,255,.70)">Privacy</a>
          <a class="tiny" href="mailto:hello@clarifyd.co.uk" style="text-decoration:none;color:rgba(242,244,255,.70)">Email</a>
          <span class="tiny">© <span id="year"></span></span>
        </div>
      </div>
    </footer>
  </main>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Reveal
    const revealItems = document.querySelectorAll('.reveal');
    const io = new IntersectionObserver((entries)=>{
      for (const e of entries){
        if (e.isIntersecting){ e.target.classList.add('is-visible'); io.unobserve(e.target); }
      }
    },{threshold:.12});
    revealItems.forEach(el=>io.observe(el));

    // Parallax
    const layers = Array.from(document.querySelectorAll('[data-parallax]'));
    let latestY=0, ticking=false;
    function applyParallax(){
      const y = latestY;
      for (const el of layers){
        const s = parseFloat(el.getAttribute('data-parallax')||'0.1');
        el.style.transform = `translate3d(0, ${-y*s}px, 0)`;
      }
      ticking=false;
    }
    function onScroll(){
      latestY = window.scrollY || 0;
      if (!ticking){ requestAnimationFrame(applyParallax); ticking=true; }
    }
    window.addEventListener('scroll', onScroll, {passive:true});
    window.addEventListener('resize', onScroll);
    onScroll();

    // ===== Live simulation (no network) =====
    const el = (id)=>document.getElementById(id);
    const clamp=(x,a,b)=>Math.max(a,Math.min(b,x));
    const lerp=(a,b,t)=>a+(b-a)*t;
    const ease=(t)=> t<.5 ? 2*t*t : 1 - Math.pow(-2*t+2,2)/2;

    const lossEl=el('loss'), aucEl=el('auc'), accEl=el('acc'), driftEl=el('drift');
    const epochEl=el('epochTag'), statusEl=el('status'), gateEl=el('gate'), deployBadge=el('deployBadge');

    const tpEl=el('tp'), fpEl=el('fp'), fnEl=el('fn'), tnEl=el('tn');
    const bars={tp:el('tpb'),fp:el('fpb'),fn:el('fnb'),tn:el('tnb')};

    const nullsEl=el('nulls'), outEl=el('outliers'), dupEl=el('dupes');
    const dropNulls=el('dropNulls'), clampOut=el('clamp'), dedupe=el('dedupe');
    const dropNullsFill=el('dropNullsFill'), clampFill=el('clampFill'), dedupeFill=el('dedupeFill');

    const curve=el('curve'), area=el('area'), marker=el('marker');

    const driftLine=el('driftLine'), driftDot=el('driftDot');
    const alertDot=el('alertDot'), alertText=el('alertText');

    const ragLog=el('ragLog'), pipeLog=el('pipeLog');
    const pauseBtn=el('pauseBtn'), restartBtn=el('restartBtn');

    const fiHost = el('fi');

    let paused=false;
    let start=performance.now();
    let epoch=1;

    el('runId').textContent = 'run_' + Math.random().toString(16).slice(2,6);
    el('seed').textContent = String(10 + Math.floor(Math.random()*90));

    function ts(){
      const d=new Date();
      const hh=String(d.getHours()).padStart(2,'0');
      const mm=String(d.getMinutes()).padStart(2,'0');
      const ss=String(d.getSeconds()).padStart(2,'0');
      return `${hh}:${mm}:${ss}`;
    }
    function addLog(container, message, html=false){
      const line=document.createElement('div');
      line.className='line mono';
      const t=document.createElement('div'); t.className='ts'; t.textContent=ts();
      const m=document.createElement('div'); m.className='msg';
      if(html) m.innerHTML=message; else m.textContent=message;
      line.appendChild(t); line.appendChild(m);
      container.appendChild(line);
      while(container.children.length>10) container.removeChild(container.firstChild);
    }

    const docs=[
      "Retrieved: policy_handbook_v2.pdf (score 0.78)",
      "Retrieved: onboarding_playbook.md (score 0.74)",
      "Retrieved: incident_runbook.yaml (score 0.72)",
      "Retrieved: customer_terms_2025.docx (score 0.69)",
      "Retrieved: pricing_matrix.csv (score 0.66)",
      "Retrieved: architecture_overview.png (score 0.64)",
    ];
    const pipeEvents=[
      "ingest: batch received (32k rows)",
      "clean: schema enforced + null handling",
      "clean: outlier clamp (winsorize p=0.98)",
      "train: gradient step applied",
      "validate: slice checks passed",
      "deploy: staging rollout started",
      "monitor: drift window updated",
    ];

    // feature importance base (will shift)
    const features = [
      {name:"tenure_months", v:0.18},
      {name:"usage_7d", v:0.16},
      {name:"region", v:0.12},
      {name:"support_tickets", v:0.11},
      {name:"plan_type", v:0.10},
      {name:"price_change", v:0.09},
      {name:"sessions_30d", v:0.08},
      {name:"latency_ms", v:0.06},
    ];

    function renderFeatures(vals){
      fiHost.innerHTML = "";
      const max = Math.max(...vals.map(x=>x.v));
      vals.slice(0,8).forEach((f)=>{
        const row=document.createElement('div');
        row.className='fi-row';
        const top=document.createElement('div');
        top.className='fi-top';
        const n=document.createElement('div'); n.className='fi-name mono'; n.textContent=f.name;
        const v=document.createElement('div'); v.className='fi-val mono'; v.textContent=f.v.toFixed(3);
        top.appendChild(n); top.appendChild(v);
        const tr=document.createElement('div'); tr.className='fi-track';
        const fl=document.createElement('div'); fl.className='fi-fill';
        fl.style.width = `${clamp((f.v/max)*92, 6, 100)}%`;
        tr.appendChild(fl);
        row.appendChild(top);
        row.appendChild(tr);
        fiHost.appendChild(row);
      });
    }

    // curve sample points
    const pts = Array.from({length:64}, ()=>({y:0.75}));

    function buildPath(values){
      const X0=40, Y0=20, W=660, H=220;
      let d='';
      for(let i=0;i<values.length;i++){
        const x = X0 + (i/(values.length-1))*W;
        const y = Y0 + (1-values[i])*H;
        d += (i===0 ? `M ${x.toFixed(2)} ${y.toFixed(2)}` : ` L ${x.toFixed(2)} ${y.toFixed(2)}`);
      }
      return d;
    }
    function buildArea(values){
      const X0=40, Y0=20, W=660, H=220;
      let d='';
      for(let i=0;i<values.length;i++){
        const x = X0 + (i/(values.length-1))*W;
        const y = Y0 + (1-values[i])*H;
        d += (i===0 ? `M ${x.toFixed(2)} ${y.toFixed(2)}` : ` L ${x.toFixed(2)} ${y.toFixed(2)}`);
      }
      d += ` L ${X0+W} ${Y0+H} L ${X0} ${Y0+H} Z`;
      return d;
    }

    // drift strip points (60 min)
    const driftPts = Array.from({length:36}, (_,i)=>({v:0.14 + i*0.001}));
    function buildDrift(values){
      const X0=20, Y0=16, W=680, H=44;
      let d='';
      for(let i=0;i<values.length;i++){
        const x = X0 + (i/(values.length-1))*W;
        const y = Y0 + (1-values[i])*H;
        d += (i===0 ? `M ${x.toFixed(2)} ${y.toFixed(2)}` : ` L ${x.toFixed(2)} ${y.toFixed(2)}`);
      }
      return d;
    }

    function updateCM(q){
      const total=1400;
      const tp=Math.round(lerp(420, 640, q));
      const fp=Math.round(lerp(210, 85, q));
      const fn=Math.round(lerp(190, 90, q));
      const tn= total - tp - fp - fn;
      tpEl.textContent=tp; fpEl.textContent=fp; fnEl.textContent=fn; tnEl.textContent=tn;

      bars.tp.style.width = `${clamp(20 + q*80, 0, 100)}%`;
      bars.fp.style.width = `${clamp(20 + (1-q)*80, 0, 100)}%`;
      bars.fn.style.width = `${clamp(20 + (1-q)*80, 0, 100)}%`;
      bars.tn.style.width = `${clamp(20 + q*80, 0, 100)}%`;
    }

    function resetRun(){
      start=performance.now();
      epoch=1;
      statusEl.textContent="training";
      gateEl.textContent="pending";
      gateEl.style.color="rgba(253,224,71,.86)";
      deployBadge.textContent="pending";
      ragLog.innerHTML="";
      pipeLog.innerHTML="";
      addLog(pipeLog,"pipeline: run started");
      addLog(ragLog,docs[Math.floor(Math.random()*docs.length)]);
      renderFeatures(features);
    }

    pauseBtn.addEventListener('click', ()=>{
      paused = !paused;
      pauseBtn.textContent = paused ? "Resume" : "Pause";
    });
    restartBtn.addEventListener('click', ()=>{
      paused=false;
      pauseBtn.textContent="Pause";
      resetRun();
    });

    resetRun();

    let nextPipe=0, nextRag=0;

    function tick(t){
      if(!paused){
        const dt=t-start;
        const cycle=18000; // a bit longer to show more “real”
        const p=(dt%cycle)/cycle;

        // "quality" improves within cycle + modest epoch boost
        const within = ease(clamp((dt%cycle)/(cycle*0.86),0,1));
        const epochBoost = clamp((epoch-1)*0.06,0,0.30);
        const q = clamp(0.10 + within*0.80 + epochBoost, 0, 1);

        // status phases
        let status="training";
        if(p>0.22 && p<=0.40) status="cleaning";
        else if(p>0.40 && p<=0.62) status="training";
        else if(p>0.62 && p<=0.78) status="validating";
        else if(p>0.78 && p<=0.90) status="deploying";
        else if(p>0.90) status="monitoring";
        statusEl.textContent=status;

        // metrics
        const loss = clamp(1.30 - q*0.98 + Math.sin(t/420)*0.02, 0.18, 1.35);
        const auc  = clamp(0.56 + q*0.42 + Math.sin(t/650)*0.01, 0.50, 0.999);
        const acc  = clamp(0.60 + q*0.33 + Math.sin(t/700)*0.008, 0.50, 0.999);

        // drift rises slowly with time, drops a bit when "monitoring actions" happen
        const driftBase = 0.10 + (dt/120000)*0.06; // slow rise
        const driftWave = Math.abs(Math.sin(t/1800))*0.06;
        const drift = clamp(driftBase + driftWave - q*0.10, 0.02, 0.36);

        lossEl.textContent=loss.toFixed(3);
        aucEl.textContent=auc.toFixed(3);
        accEl.textContent=acc.toFixed(3);
        driftEl.textContent=drift.toFixed(2);

        epochEl.textContent=`epoch ${epoch}`;

        // Gate
        if(auc>0.845 && loss<0.45){
          gateEl.textContent="pass";
          gateEl.style.color="rgba(163,255,176,.9)";
          deployBadge.textContent = (status==="deploying" || status==="monitoring") ? "shipped" : "ready";
        }else{
          gateEl.textContent="pending";
          gateEl.style.color="rgba(253,224,71,.86)";
          deployBadge.textContent="pending";
        }

        // Cleaning indicators: higher early, reduce as q improves
        const nulls = clamp(0.040 - q*0.028 + Math.abs(Math.sin(t/1200))*0.004, 0.002, 0.06);
        const outliers = clamp(0.030 - q*0.020 + Math.abs(Math.cos(t/1300))*0.003, 0.002, 0.05);
        const dupes = clamp(0.018 - q*0.012 + Math.abs(Math.sin(t/1500))*0.002, 0.001, 0.03);

        nullsEl.textContent = (nulls*100).toFixed(1) + "%";
        outEl.textContent = (outliers*100).toFixed(1) + "%";
        dupEl.textContent = (dupes*100).toFixed(1) + "%";

        // Translate to affected rows
        const baseRows = 1240000;
        const dn = Math.round(baseRows*nulls);
        const co = Math.round(baseRows*outliers);
        const dd = Math.round(baseRows*dupes);

        dropNulls.textContent = dn.toLocaleString();
        clampOut.textContent = co.toLocaleString();
        dedupe.textContent = dd.toLocaleString();

        // fills
        dropNullsFill.style.width = `${clamp(18 + (1-q)*70, 8, 96)}%`;
        clampFill.style.width = `${clamp(16 + (1-q)*64, 8, 92)}%`;
        dedupeFill.style.width = `${clamp(12 + (1-q)*52, 6, 86)}%`;

        // curve values (use "q" shaped + noise that reduces)
        for(let i=0;i<pts.length;i++){
          const u=i/(pts.length-1);
          const noiseAmp=(1-q)*0.10;
          const wave=Math.sin((t/600)+u*6)*noiseAmp + Math.cos((t/950)+u*3)*noiseAmp*0.7;
          const base=clamp(0.18 + q*0.78 - (1-u)*0.06 + wave, 0.02, 0.98);
          pts[i].y = lerp(pts[i].y, base, 0.12);
        }
        const values=pts.map(p=>p.y);
        curve.setAttribute('d', buildPath(values));
        area.setAttribute('d', buildArea(values));

        const idx=Math.floor(clamp((dt%cycle)/cycle,0,0.999)*(pts.length-1));
        const X0=40,Y0=20,W=660,H=220;
        const mx=X0+(idx/(pts.length-1))*W;
        const my=Y0+(1-values[idx])*H;
        marker.setAttribute('cx', mx.toFixed(2));
        marker.setAttribute('cy', my.toFixed(2));

        // confusion matrix
        updateCM(q);

        // Feature importance shifts with drift (introduce slight reweight)
        const shift = clamp((drift-0.12)/0.20, 0, 1); // 0..1
        const jitter = (Math.sin(t/1400)+1)/2 * 0.01;
        const updated = features.map((f,i)=>{
          // drift increases importance of "latency_ms" and "support_tickets" a bit
          let v=f.v;
          if(f.name==="latency_ms") v += 0.06*shift;
          if(f.name==="support_tickets") v += 0.04*shift;
          if(f.name==="usage_7d") v -= 0.04*shift;
          if(f.name==="sessions_30d") v -= 0.03*shift;
          v = clamp(v + (i%2? jitter : -jitter), 0.02, 0.30);
          return {name:f.name, v};
        }).sort((a,b)=>b.v-a.v);
        renderFeatures(updated);

        // drift strip update (shift values, keep smooth)
        driftPts.shift();
        driftPts.push({v: clamp(0.10 + shift*0.22 + Math.sin(t/1200)*0.02, 0.02, 0.34)});
        const dv = driftPts.map(p=>p.v/0.36); // normalise
        driftLine.setAttribute('d', buildDrift(dv));
        const last = driftPts[driftPts.length-1].v/0.36;
        const dx = 20 + 680;
        const dy = 16 + (1-last)*44;
        driftDot.setAttribute('cx', dx.toFixed(2));
        driftDot.setAttribute('cy', dy.toFixed(2));

        // alerting
        if (drift > 0.22){
          alertText.textContent = "alert";
          alertText.style.color = "rgba(255,120,120,.92)";
          alertDot.style.background = "rgba(255,120,120,.92)";
          alertDot.style.boxShadow = "0 0 18px rgba(255,120,120,.18)";
        } else {
          alertText.textContent = "ok";
          alertText.style.color = "rgba(163,255,176,.9)";
          alertDot.style.background = "rgba(163,255,176,.9)";
          alertDot.style.boxShadow = "0 0 18px rgba(163,255,176,.18)";
        }

        // logs cadence
        if (t > nextPipe){
          nextPipe = t + 1100 + Math.random()*900;
          const msg = pipeEvents[Math.floor(Math.random()*pipeEvents.length)];
          const anomaly = Math.random()<0.14;
          addLog(pipeLog, anomaly ? `${msg} <span class="hl">(anomaly)</span>` : msg, anomaly);
        }
        if (t > nextRag){
          nextRag = t + 1500 + Math.random()*900;
          addLog(ragLog, docs[Math.floor(Math.random()*docs.length)]);
        }

        // epoch bump on wrap
        if ((dt % cycle) < 18){
          if (!tick._wrapped){
            epoch = Math.min(epoch+1, 9);
            tick._wrapped = true;
            addLog(pipeLog, `epoch advanced → ${epoch}`, true);
          }
        } else tick._wrapped = false;
      }

      requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);

    console.assert(!!curve && !!area && !!marker, "SVG curve elements missing");
    console.assert(!!fiHost, "Feature importance host missing");
  </script>
</body>
</html>
